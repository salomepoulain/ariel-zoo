from ariel.body_phenotypes.robogen_lite.config import ModuleFaces, ModuleType as ModuleType
from ariel_experiments.characterize.canonical.configs.canonical_config import CanonicalConfig as CanonicalConfig
from collections.abc import Callable as Callable, Generator
from dataclasses import dataclass, field
from typing import Any

@dataclass(slots=True)
class CanonicalizableNode:
    module_type: ModuleType
    local_rotation_state: int
    config: CanonicalConfig
    full_priority: int = field(init=False)
    parent: CanonicalizableNode | None = field(kw_only=True, default=None, repr=False)
    node_tags: dict[str, Any] = field(kw_only=True, default_factory=dict)
    tree_tags: dict[str, Any] = field(kw_only=True, default_factory=dict)
    attach_process_fn: Callable[[CanonicalizableNode], None] | None = field(default=None, kw_only=True)
    def __post_init__(self) -> None: ...
    def __getitem__(self, face: ModuleFaces | str) -> CanonicalizableNode | None: ...
    def __setitem__(self, face: ModuleFaces | str, child: CanonicalizableNode) -> None: ...
    def __iter__(self) -> Generator[CanonicalizableNode, None, None]: ...
    @property
    def parent_attachment_face(self) -> ModuleFaces | None: ...
    @property
    def has_children(self): ...
    @property
    def children(self) -> Generator[CanonicalizableNode, None, None]: ...
    @property
    def children_items(self) -> Generator[tuple[ModuleFaces, CanonicalizableNode], None, None]: ...
    @property
    def axial_children(self) -> Generator[CanonicalizableNode, None, None]: ...
    @property
    def axial_children_items(self) -> Generator[tuple[ModuleFaces, CanonicalizableNode], None, None]: ...
    @property
    def radial_children(self) -> Generator[CanonicalizableNode, None, None]: ...
    @property
    def radial_children_items(self) -> Generator[tuple[ModuleFaces, CanonicalizableNode], None, None]: ...
    @property
    def global_rotation_state(self) -> int: ...
    @property
    def priority_face(self) -> ModuleFaces | None: ...
    @property
    def highest_priority_child_face(self) -> ModuleFaces | None: ...
    def attach_parent(self, face: ModuleFaces, parent: CanonicalizableNode) -> None: ...
    def detatch_parent(self) -> CanonicalizableNode | None: ...
    def detatch_child(self, face: ModuleFaces) -> CanonicalizableNode | None: ...
    def detatch_children(self) -> None: ...
    def rotate_amt(self, delta: int = 1) -> None: ...
    def shift_radial_children_global(self, shift: int) -> None: ...
    def shift_radial_children_local(self, shift: int) -> None: ...
    def copy(self, *, node_tags: dict[str, Any] | None = None, tree_tags: dict[str, Any] | None = None, deep: bool = True, copy_children: bool = True, empty: bool = False) -> CanonicalizableNode: ...
    def traverse_depth_first(self, visit_fn: Callable[[CanonicalizableNode], Any] | list[Callable[[CanonicalizableNode], Any]], *, pre_order: bool = True, post_order: bool = False) -> None: ...
    def traverse_through_parents(self, visit_fn: Callable[[CanonicalizableNode], Any] | list[Callable[[CanonicalizableNode], Any]], *, pre_order: bool = True, post_order: bool = False) -> None: ...
    def calc_shift_face_to_target(self, face_to_move: ModuleFaces, target_position_face: ModuleFaces) -> int: ...
    def canonicalize(self, *, zero_root_angle: bool = True, child_order: bool = True, return_copy: bool = True) -> CanonicalizableNode: ...
